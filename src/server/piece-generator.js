const Piece = require('./piece');

class PieceGenerator {
  constructor() {
    this.templates = {
      i: {
        0:
           [
             [0, 0, 0, 0],
             [1, 1, 1, 1],
             [0, 0, 0, 0],
             [0, 0, 0, 0],
           ],
        1:
           [
             [0, 0, 1, 0],
             [0, 0, 1, 0],
             [0, 0, 1, 0],
             [0, 0, 1, 0],
           ],
        2:
           [
             [0, 0, 0, 0],
             [0, 0, 0, 0],
             [1, 1, 1, 1],
             [0, 0, 0, 0],
           ],
        3:
           [
             [0, 1, 0, 0],
             [0, 1, 0, 0],
             [0, 1, 0, 0],
             [0, 1, 0, 0],
           ],
      },
      j: {
        0:
           [
             [1, 0, 0],
             [1, 1, 1],
             [0, 0, 0],
           ],
        1:
           [
             [0, 1, 1],
             [0, 1, 0],
             [0, 1, 0],
           ],
        2:
           [
             [0, 0, 0],
             [1, 1, 1],
             [0, 0, 1],
           ],
        3:
           [
             [0, 1, 0],
             [0, 1, 0],
             [1, 1, 0],
           ],
      },
      l: {
        0:
           [
             [0, 0, 1],
             [1, 1, 1],
             [0, 0, 0],
           ],
        1:
           [
             [0, 1, 0],
             [0, 1, 0],
             [0, 1, 1],
           ],
        2:
           [
             [0, 0, 0],
             [1, 1, 1],
             [1, 0, 0],
           ],
        3:
           [
             [1, 1, 0],
             [0, 1, 0],
             [0, 1, 0],
           ],
      },
      o: {
        0:
          [
            [1, 1],
            [1, 1],
          ],
      },
      s: {
        0:
           [
             [0, 1, 1],
             [1, 1, 0],
             [0, 0, 0],
           ],
        1:
           [
             [0, 1, 0],
             [0, 1, 1],
             [1, 1, 0],
           ],
        2:
          [
            [0, 0, 0],
            [0, 1, 1],
            [1, 1, 0],
          ],
        3:
           [
             [1, 0, 0],
             [1, 1, 0],
             [0, 1, 0],
           ],
      },
      z: {
        0:
          [
            [1, 1, 0],
            [0, 1, 1],
            [0, 0, 0],
          ],
        1:
          [
            [0, 0, 1],
            [0, 1, 1],
            [0, 1, 0],
          ],
        2:
          [
            [0, 0, 0],
            [1, 1, 0],
            [0, 1, 1],
          ],
        3:
          [
            [0, 1, 0],
            [1, 1, 0],
            [1, 0, 0],
          ],
      },
      t: {
        0:
          [
            [0, 1, 0],
            [1, 1, 1],
            [0, 0, 0],
          ],
        1:
          [
            [0, 1, 0],
            [0, 1, 1],
            [0, 1, 0],
          ],
        2:
          [
            [0, 0, 0],
            [1, 1, 1],
            [0, 1, 0],
          ],
        3:
          [
            [0, 1, 0],
            [1, 1, 0],
            [0, 1, 0],
          ],
      },
    };
  }

  generatePiece() {
    const keys = Object.keys(this.templates);
    const randomKey = Math.floor(Math.random() * keys.length);
    return new Piece(this.templates[keys[randomKey]]);
  }
}

module.exports = PieceGenerator;
